# Chrome Extension 测试指南

## 安装和加载扩展

1. **打开Chrome扩展管理页面**：
   - 在地址栏输入 `chrome://extensions/`
   - 或者 Chrome菜单 → 更多工具 → 扩展程序

2. **启用开发者模式**：
   - 在页面右上角打开"开发者模式"开关

3. **加载扩展**：
   - 点击"加载已解压的扩展程序"
   - 选择项目的 `dist` 文件夹
   - 扩展应该会出现在列表中

## 功能测试

### 1. 测试插件UI界面

1. **打开扩展弹窗**：
   - 点击浏览器工具栏中的扩展图标
   - 应该看到现代化的弹窗界面，包含：
     - 顶部状态指示器
     - 统计卡片（总结数量等）
     - 快捷操作按钮网格
     - 标签页导航

2. **检查界面功能**：
   - 点击不同的标签页（主页、总结设置）
   - 验证状态指示器显示正确状态
   - 查看统计卡片是否正确显示数据

### 2. 测试文本总结功能

1. **配置API设置**：
   - 在弹窗中切换到"总结设置"标签页
   - 输入有效的API配置（如果有AI服务的话）
   - 保存设置

2. **测试右键菜单**：
   - 访问任何网页（如新闻网站）
   - 选择一段文本
   - 右键点击选中的文本
   - 应该看到"总结选中文本"选项
   - 点击该选项

3. **验证总结流程**：
   - 等待API请求完成
   - 检查是否显示总结结果
   - 验证历史记录是否保存

### 3. 测试统计功能

1. **使用总结功能后**：
   - 重新打开扩展弹窗
   - 检查统计数据是否更新：
     - 总总结数量增加
     - 今日总结数量显示正确
     - 最后使用时间更新

2. **查看历史记录**：
   - 在"总结设置"标签页查看历史记录
   - 验证最近的总结是否显示
   - 检查时间戳格式是否正确

## 调试技巧

### 1. 查看控制台输出

- **扩展弹窗**：右键点击扩展图标 → 检查弹出内容
- **背景脚本**：扩展管理页面 → 点击扩展的"详细信息" → 查看视图：背景页
- **内容脚本**：在网页上按F12 → Console标签页

### 2. 检查存储数据

在背景脚本控制台中运行：
```javascript
chrome.storage.local.get(null, (data) => console.log(data));
```

### 3. 重新加载扩展

如果修改了代码：
1. 在扩展管理页面点击刷新图标
2. 或者移除扩展后重新加载

## 常见问题解决

### 1. 扩展无法加载
- 检查 `dist` 文件夹是否包含 `manifest.json`
- 确保构建成功完成（`npm run build`）

### 2. 右键菜单不显示
- 检查是否选中了文本
- 确认在manifest.json中有 `contextMenus` 权限
- 查看背景脚本控制台是否有错误

### 3. API调用失败
- 检查网络连接
- 验证API URL和配置是否正确
- 查看控制台是否有CORS错误

### 4. 统计数据不更新
- 确保存储权限正常工作
- 检查数据保存和读取逻辑
- 重新打开弹窗查看是否刷新

## 开发模式下的特殊注意事项

1. **热重载**：修改代码后需要手动刷新扩展
2. **权限**：manifest.json中的权限变更需要重新加载扩展
3. **存储**：开发阶段的数据会保留，可以通过开发者工具清理

## 生产部署准备

测试通过后，可以：
1. 压缩 `dist` 文件夹为zip包
2. 上传到Chrome Web Store
3. 或者分发给团队进行内部测试

---

**注意**：这个扩展目前使用模拟的API调用。如果要连接真实的AI服务，需要在 `text-summary.feature.ts` 中修改API端点和请求格式。
